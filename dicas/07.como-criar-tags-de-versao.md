# Como criar tags de versão e controlar releases no Git

Para criar uma tag de versão no Git, você pode usar o comando `git tag`. Existem dois tipos principais de tags: **leve (lightweight)** e **anotada (annotated)**. Recomenda-se o uso de tags anotadas para marcações de versão, pois elas armazenam metadados como autor, e-mail, data e mensagem descritiva.

---

## Criar uma tag no commit mais recente

Se deseja marcar o commit atual (mais recente):

```sh
git tag -a v1.0 -m "Versão 1.0 lançada"
````

* `-a`: Cria uma tag anotada.
* `v1.0`: Nome da tag de versão.
* `-m`: Mensagem da tag.

---

## Criar uma tag em um commit anterior

1. Encontre o hash do commit:

```sh
git log --oneline
```

2. Crie a tag usando o hash:

```sh
git tag -a v1.0 [hash-do-commit] -m "Versão 1.0 lançada"
```

---

## Visualizar tags

* Listar tags locais:

```sh
git tag
```

* Ver detalhes de uma tag específica:

```sh
git show v1.0
```

---

## Enviar tags para o repositório remoto

Por padrão, `git push` não envia tags. Envie explicitamente:

* Enviar uma tag específica:

```sh
git push origin v1.0
```

* Enviar todas as tags locais:

```sh
git push origin --tags
```

---

## Diferença entre tags anotadas e leves

**Tag Anotada (-a)**

* Tipo: Objeto completo no banco de dados Git.
* Metadados: Armazena nome, e-mail, data e mensagem.
* Uso: Marcadores permanentes para versões públicas.
* Criação: `git tag -a <tagname> -m "mensagem"`

**Tag Leve (lightweight)**

* Tipo: Apenas um ponteiro para um commit.
* Metadados: Não armazena informações adicionais.
* Uso: Marcadores temporários ou privados.
* Criação: `git tag <tagname>`

---

# Tags de Versão vs Releases (Lançamentos)

* **Tag de Versão:** Recurso nativo do Git que marca um commit específico (ex: `v1.0.0`). É apenas um marcador no código.
* **Release (Lançamento):** Recurso do GitHub/GitLab/Bitbucket que empacota a Tag, incluindo notas, binários e código-fonte para usuários finais.

| Característica | Tag de Versão                  | Release (Lançamento)                       |
| :------------- | :----------------------------- | :----------------------------------------- |
| Origem         | Git                            | GitHub/GitLab/Bitbucket                    |
| Propósito      | Marcar um commit significativo | Distribuir uma versão completa do software |
| Público        | Desenvolvedores                | Usuários finais                            |
| Conteúdo       | Código do commit tagueado      | Código tagueado, notas de versão, binários |

> Nota: Você pode ter uma Tag sem Release, mas não pode ter um Release sem uma Tag.

---

## Criar uma Tag de Versão

**No Terminal:**

```bash
git checkout main
git tag -a v1.0.0 -m "Versão 1.0.0 lançada com o módulo de pagamento."
git push origin v1.0.0
# Ou enviar todas as tags
git push origin --tags
```

**No GitHub:**

1. Vá até a página do repositório.
2. Clique em **Releases** > **Draft a new release**.
3. No campo **Choose a tag**, digite a tag desejada (ex: `v1.0.0`).
4. Adicione título e descrição.
5. (Opcional) Anexe binários.
6. Clique em **Publish release**.

---

# Controle de Versões com Versionamento Semântico (SemVer 2.0.0)

## Estrutura SemVer

Formato: `MAJOR.MINOR.PATCH` (X.Y.Z)

| Posição |  Nome | Indica                            | Quando incrementar                    |
| :-----: | :---: | :-------------------------------- | :------------------------------------ |
|    X    | MAIOR | Mudanças incompatíveis na API     | Breaking changes                      |
|    Y    | MENOR | Novas funcionalidades compatíveis | Adição de funcionalidades compatíveis |
|    Z    | PATCH | Correções de bugs                 | Correções compatíveis (hotfixes)      |

**Exemplo:**

* `1.2.3` → corrigir bug → `1.2.4`
* `1.2.3` → nova funcionalidade → `1.3.0`
* `1.2.3` → mudança quebradora → `2.0.0`

---

## Boas práticas SemVer

1. **Seja consistente**: trate correções, funcionalidades e mudanças quebradoras sempre da mesma forma.
2. **Fase inicial (0.Y.Z)**: ainda em desenvolvimento, mudanças podem quebrar APIs.
3. **Breaking Changes (MAIOR)**: documente alterações incompatíveis; deprecie antes de remover.
4. **Pré-lançamentos (Pre-releases)**: use sufixos `-alpha`, `-beta`, `-rc` para testar versões antes do release final.
5. **Metadados de compilação**: use `+` para informações adicionais (ex: `1.0.0+20240930.gitsha.f7c3f3`). Não afeta precedência da versão.

---

## SemVer e Git

* Use **Tags anotadas** para marcar releases:

```bash
git tag -a v1.3.0 -m "Lançamento da nova funcionalidade de busca"
git push origin v1.3.0
```

* Adote **Conventional Commits** para facilitar versionamento automatizado:

| Tipo de Commit     | Implicação SemVer |
| :----------------- | :---------------- |
| `fix:`             | PATCH             |
| `feat:`            | MINOR             |
| `BREAKING CHANGE:` | MAJOR             |
