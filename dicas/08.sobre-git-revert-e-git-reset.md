# Como usar o git revert e git reset

O comando `git revert` é usado para desfazer um commit específico, criando um novo commit que inverte as alterações do commit original. Ele não apaga o histórico, tornando-o seguro, especialmente em branches compartilhadas.

---

## Cenário de uso do git revert

Imagine que você fez um commit que introduziu um bug. O `git revert` desfaz essa mudança sem reescrever o histórico de commits.

---

## Como usar git revert

### Passo 1: Encontrar o hash do commit

```sh
git log --oneline
````

Exemplo de saída:

```
a72ef02 (HEAD -> main) Add a new feature
86bb32e Fix a critical bug
299b15f Initial commit
```

### Passo 2: Reverter o commit

```sh
git revert a72ef02
```

O Git abrirá o editor para escrever a mensagem do novo commit. Salve e feche o arquivo.

### Passo 3: Verificar histórico

```sh
git log --oneline
```

Exemplo de saída:

```
1061e79 (HEAD -> main) Revert "Add a new feature"
a72ef02 Add a new feature
86bb32e Fix a critical bug
299b15f Initial commit
```

### Passo 4: Enviar alterações

```sh
git push origin main
```

### Opções comuns do git revert

```sh
git revert HEAD            # Reverte o commit mais recente
git revert HEAD~1          # Reverte o penúltimo commit
git revert <hash> --no-edit  # Reverte sem abrir o editor
git revert <hash> --no-commit  # Reverte mas não cria commit automaticamente
```

---

## Como usar git reset

O `git reset` desfaz commits de forma diferente dependendo do modo: `--hard`, `--soft` ou `--mixed`.

### git reset --hard

* Destrutivo: descarta commits e alterações do diretório de trabalho.
* Uso: quando deseja voltar completamente a um estado anterior.

```sh
git log --oneline
git reset --hard HEAD~3
# ou
git reset --hard 299b15f
git log --oneline
```

### git reset --soft

* Menos destrutivo: desfaz commits, mas mantém alterações na staging area.
* Uso: quando quer refazer commits ou adicionar arquivos esquecidos.

```sh
git reset --soft HEAD~1
git status
git add arquivo-novo.txt
git commit -m "Commit com todas as alterações corretas"
```

### git reset --mixed (padrão)

* Desfaz commits e remove alterações da staging area, mas mantém no diretório de trabalho.
* Uso: quando quer reorganizar alterações antes de novos commits.

```sh
git reset HEAD~1
git status
```

---

## Comparativo dos modos de git reset

| Comando                 | O que faz                                                 | Melhor cenário de uso                          |
| :---------------------- | :-------------------------------------------------------- | :--------------------------------------------- |
| `git reset --hard`      | Apaga histórico, staging e diretório de trabalho          | Descartar alterações completamente, localmente |
| `git reset --soft`      | Apaga histórico, mantém alterações na staging             | Refazer commits ou amend antes de commitar     |
| `git reset` / `--mixed` | Apaga histórico e staging, mantém alterações no diretório | Reorganizar alterações antes de novos commits  |

---

## Diferença entre git revert e git reset

| Comando      | Histórico                           | Segurança                           | Uso comum                                          |
| :----------- | :---------------------------------- | :---------------------------------- | :------------------------------------------------- |
| `git revert` | Cria novo commit, mantém histórico  | Seguro para branches compartilhadas | Desfazer alterações já enviadas ao remoto          |
| `git reset`  | Reescreve histórico, remove commits | Deve ser usado com cautela          | Limpar histórico de commits locais antes de enviar |
