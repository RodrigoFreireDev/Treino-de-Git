# Como fazer um Rebase de branches

Para manter um histórico Git limpo e linear, você pode usar o comando `git rebase` para transferir os commits de uma branch para outra. A operação reescreve o histórico do seu branch de trabalho, colocando os commits em cima do commit mais recente do branch de destino (como `master` ou `main`).

**Atenção**: Nunca faça um rebase em um branch compartilhado com outros desenvolvedores, pois isso reescreve o histórico e pode causar problemas para a equipe. O rebase é geralmente usado em branches de recursos locais antes de serem integrados ao branch principal.

---

## Passo a passo para fazer um rebase

Suponha que você tenha um branch de recurso chamado `feature-1` e queira rebaseá-lo sobre o branch `master` ou `main`.

### 1. Atualize o branch principal

Mude para o branch principal e garanta que ele esteja atualizado com o repositório remoto.

```sh
git checkout master   # ou git checkout main
git pull origin master  # ou git pull origin main
````

### 2. Mude para o branch de recurso

Volte para o branch que você deseja rebasear.

```sh
git checkout feature-1
```

### 3. Inicie o rebase

Execute o comando `git rebase` para mover os commits de `feature-1` para o topo do histórico de `master`.

```sh
git rebase master
```

O Git aplicará cada commit da sua branch sobre a `master`, resultando em uma linha reta no histórico.

### 4. Resolva conflitos (se houver)

Se houver conflitos, o rebase será pausado. Para resolver:

1. Edite os arquivos para resolver as marcações de conflito (`<<<<<<<`, `=======`, `>>>>>>>`).
2. Adicione os arquivos resolvidos ao staging area:

```sh
git add .
```

3. Continue o rebase:

```sh
git rebase --continue
```

4. Repita o processo até que todos os conflitos sejam resolvidos.
5. Para abortar o rebase a qualquer momento:

```sh
git rebase --abort
```

### 5. Envie as mudanças para o remoto

Após um rebase bem-sucedido, o histórico local será diferente do remoto. Por isso, um `git push` normal pode falhar. Para enviar com segurança:

```sh
git push origin feature-1 --force-with-lease
```

---

## Diferença entre rebase e merge

| Comando      | O que faz                                                                          | Histórico                                                                                               |
| :----------- | :--------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------ |
| `git merge`  | Integra mudanças de um branch para outro, criando um commit de merge               | Histórico não-linear, linhas de desenvolvimento visíveis                                                |
| `git rebase` | Transfere commits para o topo de outro branch, criando um histórico limpo e linear | Histórico linear, mais organizado, mas reescreve commits e pode ser perigoso em branches compartilhados |
